!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@angular/common")):"function"==typeof define&&define.amd?define(["exports","@angular/core","@angular/common"],e):e((t.cd=t.cd||{},t.cd.timer={}),t.ng.core,t.ng.common)}(this,function(t,i,e){"use strict";var s=function(){function t(t,e){this.elt=t,this.renderer=e,this.onStart=new i.EventEmitter,this.onComplete=new i.EventEmitter,this.onStop=new i.EventEmitter,this.onTick=new i.EventEmitter,this.autoStart=!0,this.startTime=0,this.endTime=0,this.timeoutId=null,this.countdown=!1,this.format="default"}return t.prototype.ngAfterViewInit=function(){this.ngContentNode=this.elt.nativeElement.childNodes[1]?this.elt.nativeElement.childNodes[1]:this.elt.nativeElement.childNodes[0],this.ngContentSchema=this.ngContentNode.nodeValue,void 0!==this.autoStart&&!0!==this.autoStart||this.start()},t.prototype.ngOnDestroy=function(){this.resetTimeout()},t.prototype.start=function(){this.initVar(),this.resetTimeout(),this.startTickCount(),this.onStart.emit(this)},t.prototype.resume=function(){this.resetTimeout(),this.startTickCount()},t.prototype.stop=function(){this.clear(),this.onStop.emit(this)},t.prototype.reset=function(){this.initVar(),this.resetTimeout(),this.clear(),this.calculateTimeUnits(),this.renderText()},t.prototype.get=function(){return{seconds:this.seconds,minutes:this.minutes,hours:this.hours,days:this.days,timer:this.timeoutId,tick_count:this.tickCounter}},t.prototype.initVar=function(){this.startTime=this.startTime||0,this.endTime=this.endTime||0,this.countdown=this.countdown||!1,this.tickCounter=this.startTime,this.countdown&&0===this.startTime&&(this.countdown=!1),this.format||(this.format=5<this.ngContentSchema.length?"user":"default")},t.prototype.resetTimeout=function(){this.timeoutId&&clearInterval(this.timeoutId)},t.prototype.renderText=function(){var t;if("user"===this.format){var e={seconds:this.seconds,minutes:this.minutes,hours:this.hours,days:this.days};t=this.ngContentSchema;for(var i=0,s=Object.keys(e);i<s.length;i++){var o=s[i];t=t.replace("["+o+"]",e[o].toString())}}else"intelli"===this.format?(t="",0<this.days&&(t+=this.days.toString()+"day"+(1<this.days?"s":"")+" "),(0<this.hours||0<this.days)&&(t+=this.hours.toString()+"h "),(0<this.minutes||0<this.hours)&&0===this.days&&(t+=this.minutes.toString().padStart(2,"0")+"min "),0===this.hours&&0===this.days&&(t+=this.seconds.toString().padStart(2,"0")+"s")):"hms"===this.format?(t=this.hours.toString().padStart(2,"0")+":",t+=this.minutes.toString().padStart(2,"0")+":",t+=this.seconds.toString().padStart(2,"0")):(t=this.days.toString()+"d ",t+=this.hours.toString()+"h ",t+=this.minutes.toString()+"m ",t+=this.seconds.toString()+"s");this.renderer.setValue(this.ngContentNode,t)},t.prototype.clear=function(){this.resetTimeout(),this.timeoutId=null},t.prototype.calculateTimeUnits=function(){this.maxTimeUnit&&"day"!==this.maxTimeUnit?"second"===this.maxTimeUnit?(this.seconds=this.tickCounter,this.minutes=0,this.hours=0,this.days=0):"minute"===this.maxTimeUnit?(this.seconds=Math.floor(this.tickCounter%60),this.minutes=Math.floor(this.tickCounter/60),this.hours=0,this.days=0):"hour"===this.maxTimeUnit&&(this.seconds=Math.floor(this.tickCounter%60),this.minutes=Math.floor(this.tickCounter/60%60),this.hours=Math.floor(this.tickCounter/3600),this.days=0):(this.seconds=Math.floor(this.tickCounter%60),this.minutes=Math.floor(this.tickCounter/60%60),this.hours=Math.floor(this.tickCounter/3600%24),this.days=Math.floor(this.tickCounter/3600/24)),this.renderText()},t.prototype.startTickCount=function(){var i=this;i.timeoutId=setInterval(function(){var t;i.countdown?(t=i.tickCounter,i.startTime>i.endTime&&(t=i.tickCounter-i.endTime-1)):(t=i.tickCounter-i.startTime,i.endTime>i.startTime&&(t=i.endTime-i.tickCounter-1)),i.calculateTimeUnits();var e={seconds:i.seconds,minutes:i.minutes,hours:i.hours,days:i.days,timer:i.timeoutId,tick_count:i.tickCounter};if(i.onTick.emit(e),t<0)return i.stop(),void i.onComplete.emit(i);i.countdown?i.tickCounter--:i.tickCounter++},1e3)},t}();s.decorators=[{type:i.Component,args:[{selector:"cd-timer",template:" <ng-content></ng-content>"}]}],s.ctorParameters=function(){return[{type:i.ElementRef},{type:i.Renderer2}]},s.propDecorators={startTime:[{type:i.Input}],endTime:[{type:i.Input}],countdown:[{type:i.Input}],autoStart:[{type:i.Input}],maxTimeUnit:[{type:i.Input}],format:[{type:i.Input}],onStart:[{type:i.Output}],onStop:[{type:i.Output}],onTick:[{type:i.Output}],onComplete:[{type:i.Output}]};var o=function(){};o.decorators=[{type:i.NgModule,args:[{imports:[e.CommonModule],declarations:[s],exports:[s]}]}],o.ctorParameters=function(){return[]},t.CdTimerModule=o,t.CdTimerComponent=s,Object.defineProperty(t,"__esModule",{value:!0})});